import socketimport threadingfrom datetime import datetimeimport tkinterfrom threading import Threadclass ChatServer:    def __init__(self, serverPort=5111):        self.serverSocket = None        self.serverSocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)        self.serverSocket.settimeout(60)        self.serverSocket.bind(('', serverPort))        self.serverSocket.listen(1)        print('The server is ready to receive')        self.connectionSocket, addr = self.serverSocket.accept()    def start_chat(self):        while True:            sentence = self.connectionSocket.recv(1024).decode()            print('received_message : \n ' + sentence)            send_data = input("input_data_to_send : ")            self.connectionSocket.send(send_data.encode())            if sentence == '<finish chat>':                self.connectionSocket.close()                break        return 0class ChatServerGui():    def __init__(self):        self.chatServer = ChatServer()        self.top = tkinter.Tk()        self.top.title("Server Of Chat Gui")        self.messages_frame = tkinter.Frame(self.top)        self.my_msg = tkinter.StringVar()  # For the messages to be sent.        self.my_msg.set("Type your messages here.")        self.scrollbar = tkinter.Scrollbar(self.messages_frame)  # To navigate through past messages.        # Following will contain the messages.        self.msg_list = tkinter.Listbox(self.messages_frame, height=15, width=50, yscrollcommand=self.scrollbar.set)        self.scrollbar.pack(side=tkinter.RIGHT, fill=tkinter.Y)        self.msg_list.pack(side=tkinter.LEFT, fill=tkinter.BOTH)        self.msg_list.pack()        self.messages_frame.pack()        self.entry_field = tkinter.Entry(self.top, textvariable=self.my_msg)        self.send_button = None        self.set_ports()    def set_ports(self):        self.entry_field.bind("<Return>", self.send)        self.entry_field.pack()        self.send_button = tkinter.Button(self.top, text="Send", command=self.send)        self.send_button.pack()        self.top.protocol("WM_DELETE_WINDOW", self.on_closing)    def run(self):        receive_thread = Thread(target=self.receive)        receive_thread.start()        tkinter.mainloop()    def receive(self):        """Handles receiving of messages."""        while True:            try:                msg = self.chatServer.connectionSocket.recv(1024).decode("utf8")                self.msg_list.insert(tkinter.END, msg)            except OSError:  # Possibly client has left the chat.                break    def send(self, event=None):  # event is passed by binders.        """Handles sending of messages."""        msg = self.my_msg.get()        self.my_msg.set("")  # Clears input field.        self.chatServer.connectionSocket.send(bytes(msg, "utf8"))        if msg == "{quit}":            self.chatServer.connectionSocket.close()            self.top.quit()    def on_closing(self, event=None):        """This function is to be called when the window is closed."""        self.my_msg.set("{quit}")        self.send()        self.chatServer.connectionSocket.close()